<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Word machine</title>
        <meta name="description" content="A random word generator.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/assets/css/navbar.css">
        <script src="/assets/modules/words.js"></script>
        <style>
            #story{
                width: 80%;
                height: 350px;
            }
        </style>
    </head>
    <body>
        <p id="par">Loading...<br><br> If you're reading this it might be because there was an error. Reload?</p>
        <br><br>
        <textarea id="story" disabled></textarea><br><button onclick="savestory()">Download</button>
        <button onclick="gen(100)">Generate 100</button>
        <noscript>Hi so you need javascript enabled thx</noscript>
        <script>
            var p = document.getElementById("par")
            var story = document.getElementById("story")
            setInterval(() => {
                var nextword = words[Math.floor(Math.random() * words.length)]
                p.innerHTML = nextword
                story.textContent = story.textContent += nextword + " "
            }, 50);
            function download(filename, text) {
                var element = document.createElement('a');
                element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
                element.setAttribute('download', filename);
                element.style.display = 'none';
                document.body.appendChild(element);
                element.click();
                document.body.removeChild(element);
            }
            function generateName(){
               return words[Math.floor(Math.random() * words.length)] + " " + words[Math.floor(Math.random() * words.length)] + " " + words[Math.floor(Math.random() * words.length)]
            }
            function savestory(){
                download(generateName() + ".txt", document.getElementById("story").textContent)
            }
            function gen(amount){
                for (let index = 0; index < amount; index++) {
                    story.textContent = story.textContent += words[Math.floor(Math.random() * words.length)] + " "       
                }
            }
        </script>
        <script src="/assets/modules/navbar.js"></script>
    </body>
</html>