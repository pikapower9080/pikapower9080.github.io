<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A time display great for displaying on a projector or screen">
    <meta name="Keywords" content="thereal_pika, pikapower9080">
    <meta name="author" content="pikapower9080">
    <title id="pagetitle">Clock</title>
    <link rel="icon" href="favicon.ico">
    <script src="/assets/modules/float.js"></script>
    <script src="/assets/modules/clockfunctions.js"></script>
    <style>
        :root{
          --main-text-color: white;
          --custom-background: #000000;
          --custom-text-color: white;
        }
        .center{
            width: 80%;
            text-align: center;
            position: relative;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        #time{
          font-size: 10em;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
        }
        #date{
          font-size: 4em;
          top: 50%;
          transform: translate(-50%, -50%);
        }
        body{
            background-image: url("/assets/downloads/win11/wallpapers/touchkeyboard/TouchKeyboardThemeLight003.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            background-color: var(--custom-background);
            color: var(--custom-text-color);
        }
        #fullscreen_btn{
          position: absolute;
          bottom: 0;
          right: 0;
          width: 20px;
          padding: 10px;
        }
        #settings_btn{
          position: absolute;
          bottom: 0;
          width: 20px;
          padding: 10px;
        }
        #clockbody{
          background-color: var(--custom-background);
        }
    </style>
    <style id="full_style">
        :fullscreen{
            color: var(--custom-text-color);
            background-image: url("/assets/downloads/win11/wallpapers/touchkeyboard/TouchKeyboardThemeLight003.jpg");
            background-size: cover;
        }
    </style>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-QDVLYLPGDW"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
    
          gtag('config', 'G-QDVLYLPGDW');
        </script>
  </head>
  <body>
      <div id="clockbody">
        <img src="/assets/icons/fullscreen/2x/outline_open_in_full_white_24dp.png" onclick="full()" id="fullscreen_btn">
        <img src="/assets/icons/settings/2x/outline_settings_white_24dp.png" onclick="settings()" id="settings_btn">
        <p id="clocktext" class="center"><span id="time" style="font-family: 'Segoe UI', sans-serif; color: var(--main-text-color); color: var(--main-text-color);">Loading...</span><br><span id="date" style="font-family: 'Segoe UI', sans-serif; color: var(--main-text-color);">Loading...</span></p>
      </div>
        <div id="FloatingLayer" style="position:absolute;width:400px;left:50px;top:50px;visibility:visible; border:solid 1px #f0cd07;">
          <div id="titleBar" style="cursor:move; width:100%; position:relative; border-bottom:solid 1px #FF6600; background-color:#f3c11c;">
              <div id="title" style="margin-right:30px; padding-left:3px;">
                  <font face="Arial" color="#333333">Settings</font>
              </div>
              <div id="closeX" style="cursor:hand; position:absolute; right:5px; top:0px;">
                  <a href="#" onClick="ToggleFloatingLayer('FloatingLayer',0);return false"  style="text-decoration:none"><font color="#333333" size="2" face="arial">X</font></a>
              </div>
          </div>
          <div id="floatingContent" style="padding:3px; background-color:#CCCCCC; color:#333333;">
            <input type="checkbox" id="showseconds" checked> Show seconds<br>
            <input type="checkbox" id="showampm" checked> Show am/pm<br>
            <input type="checkbox" id="monospacefont"> <span style="font-family: monospace;">Monospaced font</span><br>
            <input type="checkbox" id="showdate" checked> Show date<br>
            Background <select id="backgroundselect">
              <option>Abstract 1 (Default)</option>
              <option>Abstract 2</option>
              <option>Abstract 3</option>
              <option>Classic</option>
              <option>Glow 1</option>
              <option>Glow 2</option>
              <option>Glow 3</option>
              <option>Glow 4</option>
              <option>Sunrise</option>
              <!-- <option>Sunrise 2</option>
              <option>Sunrise 3</option> -->
              <option>Burning</option>
              <option>Polygon</option>
              <!-- <option>Gradiant Wave</option>
              <option>Yellow Swirl</option>
              <option>Gold Rain</option>
              <option>Above the Clouds</option> -->
              <option>Silk (Animated)</option>
              <option>Custom Color</option>
            </select> <a href="backgrounds.html" target="_blank">Backgrounds</a><br>
            <details>
              <summary>Colors</summary>
              Custom background color <input type="color" id="custombackgroundcolor"><label id="colorlabel"> #000000</label><br>
              Font color <input type="color" id="fontcolor" value="#ffffff"><label id="fontcolorlabel"> #ffffff</label><br>
            </details>
            <button onclick="refresh()">Done</button>
              <!-- End of content area -->
          </div>
      </div>
      <script>
          ToggleFloatingLayer('FloatingLayer', 0)
          
          var clocktext = document.getElementById("time")
          var datetext = document.getElementById("date")

          function getdate() {
            const d = new Date()
            return `${getDOTW()} ${d.getUTCMonth() + 1}/${d.getUTCDate()}/${d.getUTCFullYear()}` // javascript month numbers start at 0 so we have to add one.
          }
          function update() {
            const d = new Date()
            //clocktext.innerHTML = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds()
            clocktext.innerHTML = formatAMPM(d)
          }
          function slowupdate() {
            const d = new Date()
            document.getElementById("pagetitle").innerHTML = d.getHours() + ":" + d.getMinutes() + " | Clock"
            if (showdate.checked) {
              datetext.innerHTML = getdate()
            } else {
              datetext.innerHTML = ""
            }
          }
          const colorinput = getElement("custombackgroundcolor")
            colorinput.addEventListener("input", function(){
              getElement("colorlabel").innerHTML = " " + colorinput.value
              document.body.style.setProperty("--custom-background", colorinput.value)
          }, false)
          const fontcolorinput = getElement("fontcolor")
          fontcolorinput.addEventListener("input", function(){
            document.getElementById("fontcolorlabel").innerHTML = " " + fontcolorinput.value
            document.body.style.setProperty("--custom-font-color", fontcolorinput.value)
          })
          update()
          setInterval(() => {
            update()
          }, 500);
          slowupdate()
          setInterval(() => {
            slowupdate()
          }, 5000);
          function full() {
              var clockbody = document.getElementById("clockbody")
              if (document.fullscreen) {
                  document.exitFullscreen()
              } else {
                clockbody.requestFullscreen()
              }
          }
          function refresh() {
            ToggleFloatingLayer('FloatingLayer', 0)
            const showseconds = getElement("showseconds")
            const showampm = getElement("showampm")
            const backgroundselect = getElement("backgroundselect")
            const monospacecheck = getElement("monospacefont")
            const showdate = getElement("showdate")

            var newbackground = "/assets/clockbackground.png"
            newbackground = updatebackground(newbackground)
            console.log(newbackground)
            if (newbackground == "") {
              document.body.setAttribute("style", `background-image: url("${newbackground}"); --custom-background:${colorinput.value};`)
            } else {
              document.body.setAttribute("style", `background-image: url("${newbackground}");`)
            }
            document.body.style.setProperty("--custom-font-color", fontcolorinput.value)
            document.getElementById("full_style").innerHTML = `:fullscreen{color:white;\nbackground-image: url(${newbackground});\nbackground-size: cover;}`
            if (monospacecheck.checked) {
              clocktext.setAttribute("style", "font-family: monospace; color: var(--custom-font-color);")
              datetext.setAttribute("style", "font-family: monospace; color: var(--custom-font-color);")
            } else {
              clocktext.setAttribute("style", "font-family: 'Segoe UI', sans-serif; color: var(--custom-font-color);")
              datetext.setAttribute("style", "font-family: 'Segoe UI', sans-serif; color: var(--custom-font-color);")
            }
          }
          function settings() {
            ToggleFloatingLayer('FloatingLayer', 1)
          }
      </script>
  </body>
</html>